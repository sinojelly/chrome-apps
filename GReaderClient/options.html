<!DOCTYPE html>
<html>
<!-- Copyright 2009 Google Inc. All Rights Reserved. -->
<head>
  <title>Google Reader Notifier Options</title>
  <style type="text/css">
    body {
      font-family: arial, sans-serif;
      font-size: smaller;
    }

    td {
      padding: 5px;
    }

    .secondary td {
      padding: 0px 5px;
    }

    .header {
      font-size: 13px;
      font-weight: bold;
      border-bottom: solid 1px #ccc;
      padding-bottom: 1px;
    }

    .label {
      text-align: right;
    }

    .buttons {
      text-align: right;
      padding-top: 1em;
    }
  </style>
  <script type="text/javascript" src="prefs.js"></script>
  <script type="text/javascript">

  // Saves options to localStorage.
  function saveOptions() {
    var formNode = document.getElementById('options-form');

    var clickBehaviorNode = formNode['click-behavior'];
    for (var i = 0, clickBehaviorOptionNode;
         clickBehaviorOptionNode = clickBehaviorNode[i];
         i++) {
      if (clickBehaviorOptionNode.checked) {
        setClickBehavior(clickBehaviorOptionNode.value);
      }
    }

    var refreshIntervalNode = formNode['refresh-interval'];
    var refreshInterval =
        refreshIntervalNode.children[refreshIntervalNode.selectedIndex].value;
    setRefreshInterval(refreshInterval);

    // Update status to let user know options were saved.
    var buttonNode = document.getElementById('save-button');
    buttonNode.innerHTML = 'Saved';
    buttonNode.disabled = true;
    setTimeout(function() {
      buttonNode.innerHTML = 'Save';
      buttonNode.disabled = false;
    }, 750);
  }

  function restoreOptions() {
    var formNode = document.getElementById('options-form');

    var clickBehavior = getClickBehavior();
    var clickBehaviorNode = formNode['click-behavior'];
    for (var i = 0, clickBehaviorOptionNode;
         clickBehaviorOptionNode = clickBehaviorNode[i];
         i++) {
      clickBehaviorOptionNode.checked =
          clickBehaviorOptionNode.value == clickBehavior;
    }

    var refreshIterval = getRefreshInterval();
    var refreshIntervalNode = formNode['refresh-interval'];
    for (var i = 0, refreshValueNode;
         refreshValueNode = refreshIntervalNode[i];
         i++) {
      if (refreshValueNode.value == refreshIterval) {
        refreshValueNode.selected = 'true';
        break;
      }
    }
  }
  </script>
</head>

<body onload="restoreOptions()">

<form id="options-form">

<table>
  <tr>
    <td class="header" colspan="2">
      Google Reader Notifier Options
    </td>
  </tr>
  <tr>
    <td class="label">On click:</td>
    <td>
      <label>
        <input type="radio" name="click-behavior" value="module">
        Show popup
    </td>
  </tr>
  <tr class="secondary">
    <td>&nbsp;</td>
    <td>
      <label>
        <input type="radio" name="click-behavior" value="tab">
        Open Google Reader
      </label>
    </td>
  </tr>
  <tr>
    <td class="label">Update every:</td>
    <td>
      <select name="refresh-interval">
        <option value="300000">5 minutes</option>
        <option value="600000">10 minutes</option>
        <option value="900000">15 minutes</option>
        <option value="1800000">30 minutes</option>
      </select>
    </td>
  </tr>
  <tr>
    <td class="buttons" colspan="2">
      <button onclick="saveOptions()" id="save-button">Save</button>
    </td>
  </tr>
</table>

</form>

</body>
</html>
